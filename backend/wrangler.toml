name = "mystery-link-backend"
main = "src/index.ts"
compatibility_date = "2024-12-01"

[durable_objects]
bindings = [
  { name = "GAME_ROOM", class_name = "GameRoom", script_name = "mystery-link-backend" },
  { name = "TOURNAMENT_ROOM", class_name = "TournamentRoom", script_name = "mystery-link-backend" }
]

# KV Namespace for game state persistence (optional)
# Uncomment and add IDs after creating KV namespaces in Cloudflare Dashboard
# [[kv_namespaces]]
# binding = "GAME_STATE_KV"
# id = "YOUR_KV_NAMESPACE_ID"
# preview_id = "YOUR_PREVIEW_KV_NAMESPACE_ID"

# [[kv_namespaces]]
# binding = "TOURNAMENT_KV"
# id = "YOUR_KV_NAMESPACE_ID"
# preview_id = "YOUR_PREVIEW_KV_NAMESPACE_ID"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["GameRoom", "TournamentRoom"]

[env.production.vars]
ENVIRONMENT = "production"
# Replace with a comma-separated list of your allowed production origins
ALLOWED_ORIGINS = "https://example.com"
# Set JWT_SECRET securely via `wrangler secret put JWT_SECRET`

# For local development
[dev]
port = 8787
local_protocol = "http"

